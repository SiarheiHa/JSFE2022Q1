(()=>{"use strict";var e={213:(e,t,a)=>{a.r(t)},647:function(e,t){var a=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,i){function o(e){try{d(n.next(e))}catch(e){i(e)}}function s(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="http://127.0.0.1:3000";var r;!function(e){e.garage="/garage",e.engine="/engine",e.winners="/winners"}(r||(r={}));const i=(e,t,a)=>{const n=new URL(`${t}${(e=>e?`?${Object.keys(e).map((t=>`_${t}=${e[t]}`)).join("&")}`:"")(a)}`,e);return n};t.default=class{constructor(){this.baseLink=n}getCars(e){return a(this,void 0,void 0,(function*(){const t=yield fetch(i(n,r.garage,e));if(!t.ok)throw new Error("server is not available");const a=t.headers.get("X-Total-Count"),o=yield t.json();return{cars:o,count:a?Number(a):o.length,page:(null==e?void 0:e.page)?e.page:1}}))}createCar(e){return fetch(i(n,r.garage),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}deleteCar(e){return fetch(`${i(n,r.garage)}/${e}`,{method:"DELETE"})}updateCar(e,t){return fetch(`${i(n,r.garage)}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}getWinners(e){return fetch(i(n,r.winners,e))}getWinner(e){return fetch(`${i(n,r.winners)}/${e}`)}createWinner(e){return fetch(i(n,r.winners),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}updateWinner(e,t){return fetch(`${i(n,r.winners)}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}deleteWinner(e){return fetch(`${i(n,r.winners)}/${e}`,{method:"DELETE"})}getCar(e){return fetch(`${i(n,r.garage)}/${e}`)}startEngine(e){return fetch(`${i(n,r.engine)}?id=${e.id}&status=${e.status}`,{method:"PATCH"})}stopEngine(e){return fetch(`${i(n,r.engine)}?id=${e.id}&status=${e.status}`,{method:"PATCH"})}drive(e){return fetch(`${i(n,r.engine)}?id=${e.id}&status=${e.status}`,{method:"PATCH"})}}},366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{brand:"Seat",models:["Alhambra","Altea","Altea XL","Arosa","Cordoba","Cordoba Vario","Exeo","Ibiza","Ibiza ST","Exeo ST","Leon","Leon ST","Inca","Mii","Toledo"]},{brand:"Renault",models:["Captur","Clio","Clio Grandtour","Espace","Express","Fluence","Grand Espace","Grand Modus","Grand Scenic","Kadjar","Kangoo","Kangoo Express","Koleos","Laguna","Laguna Grandtour","Latitude","Mascott","Mégane","Mégane CC","Mégane Combi","Mégane Grandtour","Mégane Coupé","Mégane Scénic","Scénic","Talisman","Talisman Grandtour","Thalia","Twingo","Wind","Zoé"]},{brand:"Peugeot",models:["1007","107","106","108","2008","205","205 Cabrio","206","206 CC","206 SW","207","207 CC","207 SW","306","307","307 CC","307 SW","308","308 CC","308 SW","309","4007","4008","405","406","407","407 SW","5008","508","508 SW","605","806","607","807","Bipper","RCZ"]},{brand:"Dacia",models:["Dokker","Duster","Lodgy","Logan","Logan MCV","Logan Van","Sandero","Solenza"]},{brand:"Citroën",models:["Berlingo","C-Crosser","C-Elissée","C-Zero","C1","C2","C3","C3 Picasso","C4","C4 Aircross","C4 Cactus","C4 Coupé","C4 Grand Picasso","C4 Sedan","C5","C5 Break","C5 Tourer","C6","C8","DS3","DS4","DS5","Evasion","Jumper","Jumpy","Saxo","Nemo","Xantia","Xsara"]},{brand:"Opel",models:["Agila","Ampera","Antara","Astra","Astra cabrio","Astra caravan","Astra coupé","Calibra","Campo","Cascada","Corsa","Frontera","Insignia","Insignia kombi","Kadett","Meriva","Mokka","Movano","Omega","Signum","Vectra","Vectra Caravan","Vivaro","Vivaro Kombi","Zafira"]},{brand:"Alfa Romeo",models:["145","146","147","155","156","156 Sportwagon","159","159 Sportwagon","164","166","4C","Brera","GTV","MiTo","Crosswagon","Spider","GT","Giulietta","Giulia"]},{brand:"Škoda",models:["Favorit","Felicia","Citigo","Fabia","Fabia Combi","Fabia Sedan","Felicia Combi","Octavia","Octavia Combi","Roomster","Yeti","Rapid","Rapid Spaceback","Superb","Superb Combi"]},{brand:"Chevrolet",models:["Alero","Aveo","Camaro","Captiva","Corvette","Cruze","Cruze SW","Epica","Equinox","Evanda","HHR","Kalos","Lacetti","Lacetti SW","Lumina","Malibu","Matiz","Monte Carlo","Nubira","Orlando","Spark","Suburban","Tacuma","Tahoe","Trax"]},{brand:"Porsche",models:["911 Carrera","911 Carrera Cabrio","911 Targa","911 Turbo","924","944","997","Boxster","Cayenne","Cayman","Macan","Panamera"]},{brand:"Honda",models:["Accord","Accord Coupé","Accord Tourer","City","Civic","Civic Aerodeck","Civic Coupé","Civic Tourer","Civic Type R","CR-V","CR-X","CR-Z","FR-V","HR-V","Insight","Integra","Jazz","Legend","Prelude"]},{brand:"Subaru",models:["BRZ","Forester","Impreza","Impreza Wagon","Justy","Legacy","Legacy Wagon","Legacy Outback","Levorg","Outback","SVX","Tribeca","Tribeca B9","XV"]},{brand:"Mazda",models:["121","2","3","323","323 Combi","323 Coupé","323 F","5","6","6 Combi","626","626 Combi","B-Fighter","B2500","BT","CX-3","CX-5","CX-7","CX-9","Demio","MPV","MX-3","MX-5","MX-6","Premacy","RX-7","RX-8","Xedox 6"]},{brand:"Mitsubishi",models:["3000 GT","ASX","Carisma","Colt","Colt CC","Eclipse","Fuso canter","Galant","Galant Combi","Grandis","L200","L200 Pick up","L200 Pick up Allrad","L300","Lancer","Lancer Combi","Lancer Evo","Lancer Sportback","Outlander","Pajero","Pajeto Pinin","Pajero Pinin Wagon","Pajero Sport","Pajero Wagon","Space Star"]},{brand:"Lexus",models:["CT","GS","GS 300","GX","IS","IS 200","IS 250 C","IS-F","LS","LX","NX","RC F","RX","RX 300","RX 400h","RX 450h","SC 430"]},{brand:"Toyota",models:["4-Runner","Auris","Avensis","Avensis Combi","Avensis Van Verso","Aygo","Camry","Carina","Celica","Corolla","Corolla Combi","Corolla sedan","Corolla Verso","FJ Cruiser","GT86","Hiace","Hiace Van","Highlander","Hilux","Land Cruiser","MR2","Paseo","Picnic","Prius","RAV4","Sequoia","Starlet","Supra","Tundra","Urban Cruiser","Verso","Yaris","Yaris Verso"]},{brand:"BMW",models:["i3","i8","M3","M4","M5","M6","Rad 1","Rad 1 Cabrio","Rad 1 Coupé","Rad 2","Rad 2 Active Tourer","Rad 2 Coupé","Rad 2 Gran Tourer","Rad 3","Rad 3 Cabrio","Rad 3 Compact","Rad 3 Coupé","Rad 3 GT","Rad 3 Touring","Rad 4","Rad 4 Cabrio","Rad 4 Gran Coupé","Rad 5","Rad 5 GT","Rad 5 Touring","Rad 6","Rad 6 Cabrio","Rad 6 Coupé","Rad 6 Gran Coupé","Rad 7","Rad 8 Coupé","X1","X3","X4","X5","X6","Z3","Z3 Coupé","Z3 Roadster","Z4","Z4 Roadster"]},{brand:"Volkswagen",models:["Amarok","Beetle","Bora","Bora Variant","Caddy","Caddy Van","Life","California","Caravelle","CC","Crafter","Crafter Van","Crafter Kombi","CrossTouran","Eos","Fox","Golf","Golf Cabrio","Golf Plus","Golf Sportvan","Golf Variant","Jetta","LT","Lupo","Multivan","New Beetle","New Beetle Cabrio","Passat","Passat Alltrack","Passat CC","Passat Variant","Passat Variant Van","Phaeton","Polo","Polo Van","Polo Variant","Scirocco","Sharan","T4","T4 Caravelle","T4 Multivan","T5","T5 Caravelle","T5 Multivan","T5 Transporter Shuttle","Tiguan","Touareg","Touran"]},{brand:"Suzuki",models:["Alto","Baleno","Baleno kombi","Grand Vitara","Grand Vitara XL-7","Ignis","Jimny","Kizashi","Liana","Samurai","Splash","Swift","SX4","SX4 Sedan","Vitara","Wagon R+"]},{brand:"Mercedes-Benz",models:["100 D","115","124","126","190","190 D","190 E","200 - 300","200 D","200 E","210 Van","210 kombi","310 Van","310 kombi","230 - 300 CE Coupé","260 - 560 SE","260 - 560 SEL","500 - 600 SEC Coupé","Trieda A","A","A L","AMG GT","Trieda B","Trieda C","C","C Sportcoupé","C T","Citan","CL","CL","CLA","CLC","CLK Cabrio","CLK Coupé","CLS","Trieda E","E","E Cabrio","E Coupé","E T","Trieda G","G Cabrio","GL","GLA","GLC","GLE","GLK","Trieda M","MB 100","Trieda R","Trieda S","S","S Coupé","SL","SLC","SLK","SLR","Sprinter"]},{brand:"Saab",models:["9-3","9-3 Cabriolet","9-3 Coupé","9-3 SportCombi","9-5","9-5 SportCombi","900","900 C","900 C Turbo","9000"]},{brand:"Audi",models:["100","100 Avant","80","80 Avant","80 Cabrio","90","A1","A2","A3","A3 Cabriolet","A3 Limuzina","A3 Sportback","A4","A4 Allroad","A4 Avant","A4 Cabriolet","A5","A5 Cabriolet","A5 Sportback","A6","A6 Allroad","A6 Avant","A7","A8","A8 Long","Q3","Q5","Q7","R8","RS4 Cabriolet","RS4/RS4 Avant","RS5","RS6 Avant","RS7","S3/S3 Sportback","S4 Cabriolet","S4/S4 Avant","S5/S5 Cabriolet","S6/RS6","S7","S8","SQ5","TT Coupé","TT Roadster","TTS"]},{brand:"Kia",models:["Avella","Besta","Carens","Carnival","Cee`d","Cee`d SW","Cerato","K 2500","Magentis","Opirus","Optima","Picanto","Pregio","Pride","Pro Cee`d","Rio","Rio Combi","Rio sedan","Sephia","Shuma","Sorento","Soul","Sportage","Venga"]},{brand:"Land Rover",models:["109","Defender","Discovery","Discovery Sport","Freelander","Range Rover","Range Rover Evoque","Range Rover Sport"]},{brand:"Dodge",models:["Avenger","Caliber","Challenger","Charger","Grand Caravan","Journey","Magnum","Nitro","RAM","Stealth","Viper"]},{brand:"Chrysler",models:["300 C","300 C Touring","300 M","Crossfire","Grand Voyager","LHS","Neon","Pacifica","Plymouth","PT Cruiser","Sebring","Sebring Convertible","Stratus","Stratus Cabrio","Town & Country","Voyager"]},{brand:"Ford",models:["Aerostar","B-Max","C-Max","Cortina","Cougar","Edge","Escort","Escort Cabrio","Escort kombi","Explorer","F-150","F-250","Fiesta","Focus","Focus C-Max","Focus CC","Focus kombi","Fusion","Galaxy","Grand C-Max","Ka","Kuga","Maverick","Mondeo","Mondeo Combi","Mustang","Orion","Puma","Ranger","S-Max","Sierra","Street Ka","Tourneo Connect","Tourneo Custom","Transit","Transit","Transit Bus","Transit Connect LWB","Transit Courier","Transit Custom","Transit kombi","Transit Tourneo","Transit Valnik","Transit Van","Transit Van 350","Windstar"]},{brand:"Hummer",models:["H2","H3"]},{brand:"Hyundai",models:["Accent","Atos","Atos Prime","Coupé","Elantra","Galloper","Genesis","Getz","Grandeur","H 350","H1","H1 Bus","H1 Van","H200","i10","i20","i30","i30 CW","i40","i40 CW","ix20","ix35","ix55","Lantra","Matrix","Santa Fe","Sonata","Terracan","Trajet","Tucson","Veloster"]},{brand:"Infiniti",models:["EX","FX","G","G Coupé","M","Q","QX"]},{brand:"Jaguar",models:["Daimler","F-Pace","F-Type","S-Type","Sovereign","X-Type","X-type Estate","XE","XF","XJ","XJ12","XJ6","XJ8","XJ8","XJR","XK","XK8 Convertible","XKR","XKR Convertible"]},{brand:"Jeep",models:["Cherokee","Commander","Compass","Grand Cherokee","Patriot","Renegade","Wrangler"]},{brand:"Nissan",models:["100 NX","200 SX","350 Z","350 Z Roadster","370 Z","Almera","Almera Tino","Cabstar E - T","Cabstar TL2 Valnik","e-NV200","GT-R","Insterstar","Juke","King Cab","Leaf","Maxima","Maxima QX","Micra","Murano","Navara","Note","NP300 Pickup","NV200","NV400","Pathfinder","Patrol","Patrol GR","Pickup","Pixo","Primastar","Primastar Combi","Primera","Primera Combi","Pulsar","Qashqai","Serena","Sunny","Terrano","Tiida","Trade","Vanette Cargo","X-Trail"]},{brand:"Volvo",models:["240","340","360","460","850","850 kombi","C30","C70","C70 Cabrio","C70 Coupé","S40","S60","S70","S80","S90","V40","V50","V60","V70","V90","XC60","XC70","XC90"]},{brand:"Daewoo",models:["Espero","Kalos","Lacetti","Lanos","Leganza","Lublin","Matiz","Nexia","Nubira","Nubira kombi","Racer","Tacuma","Tico"]},{brand:"Fiat",models:["1100","126","500","500L","500X","850","Barchetta","Brava","Cinquecento","Coupé","Croma","Doblo","Doblo Cargo","Doblo Cargo Combi","Ducato","Ducato Van","Ducato Kombi","Ducato Podvozok","Florino","Florino Combi","Freemont","Grande Punto","Idea","Linea","Marea","Marea Weekend","Multipla","Palio Weekend","Panda","Panda Van","Punto","Punto Cabriolet","Punto Evo","Punto Van","Qubo","Scudo","Scudo Van","Scudo Kombi","Sedici","Seicento","Stilo","Stilo Multiwagon","Strada","Talento","Tipo","Ulysse","Uno","X1/9"]},{brand:"MINI",models:["Cooper","Cooper Cabrio","Cooper Clubman","Cooper D","Cooper D Clubman","Cooper S","Cooper S Cabrio","Cooper S Clubman","Countryman","Mini One","One D"]},{brand:"Rover",models:["200","214","218","25","400","414","416","620","75"]},{brand:"Smart",models:["Cabrio","City-Coupé","Compact Pulse","Forfour","Fortwo cabrio","Fortwo coupé","Roadster"]}]},151:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,i){function o(e){try{d(n.next(e))}catch(e){i(e)}}function s(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(a(576)),o=r(a(113)),s=a(377),d=a(183);t.default=class{constructor(){this.model=new i.default,this.view=new o.default(this.eventHandler.bind(this),this.updateWinners.bind(this))}start(){return n(this,void 0,void 0,(function*(){const e=yield this.model.getGarageData(),t=yield this.model.getWinnersData();this.view.drawApp(e,t)}))}eventHandler(e){var t;return n(this,void 0,void 0,(function*(){const a=e.target;if(a.closest(".winners-container"))return void this.winnersEventHandler(e);const n=a.dataset.button,r=this.view.garage.count%s.MAX_CARS_COUNT_PER_PAGE==0?this.view.garage.lastPage+1:this.view.garage.lastPage,i=1===this.view.garage.cars.length?this.view.garage.page-1:this.view.garage.page;if("a"!==n&&"b"!==n&&"race"!==n&&"reset"!==n&&"startCar"!==e.type){if("create"===n||"update"===n){const e=this.view.garage.inputs[n].textInput.value,a=this.view.garage.inputs[n].colorInput.value;if("create"===n)(yield this.model.createCar({name:e,color:a})).ok&&this.updateView({page:r,limit:s.MAX_CARS_COUNT_PER_PAGE});else if(null===(t=this.view.garage.selectedCar)||void 0===t?void 0:t.id){const t=String(this.view.garage.selectedCar.id);(yield this.model.updateCar(t,{name:e,color:a})).ok&&(this.updateView({page:this.view.garage.page,limit:s.MAX_CARS_COUNT_PER_PAGE}),this.updateWinnersView())}}if("remove"===n){const e=a.dataset.car,t=yield this.model.deleteCar(e);yield this.model.deleteWinner(e),t.ok&&(this.updateWinnersView(),this.updateView({page:i,limit:s.MAX_CARS_COUNT_PER_PAGE}))}"next"===n&&this.updateView({page:this.view.garage.page+1,limit:s.MAX_CARS_COUNT_PER_PAGE}),"prev"===n&&this.updateView({page:this.view.garage.page-1,limit:s.MAX_CARS_COUNT_PER_PAGE}),"generate"===n&&(yield this.model.generateRandomCars(100)).every((e=>e.ok))&&this.updateView()}else this.animationHandler(e)}))}winnersEventHandler(e){const t=e.target.dataset.button,{sort:a,order:n}=this.view.winners;let{page:r}=this.view.winners;const i=d.MAX_WINNERS_COUNT_PER_PAGE;"next"===t&&(r+=1),"prev"===t&&(r-=1),this.updateWinnersView({page:r,limit:i,sort:a,order:n})}updateView(e){return n(this,void 0,void 0,(function*(){const t=yield this.model.getGarageData(e);this.view.garage.updateGarage(t)}))}updateWinners(e){return n(this,void 0,void 0,(function*(){yield this.model.updateWinners(e),this.updateWinnersView()}))}updateWinnersView(e={sort:this.view.winners.sort,order:this.view.winners.order,page:this.view.winners.page,limit:d.MAX_WINNERS_COUNT_PER_PAGE}){return n(this,void 0,void 0,(function*(){const t=yield this.model.getWinnersData(e);this.view.winners.updateWinners(t)}))}animationHandler(e){return n(this,void 0,void 0,(function*(){const t=e.target,a=t.dataset.button,r=t.dataset.car;if("a"===a){const e=yield this.model.startEngine(r);if(e.ok){const t=yield e.json();this.view.garage.startCarAnimation(r,t),this.getRacersData({id:r})}}if("b"===a&&(yield this.model.stopEngine(r)).ok&&this.view.garage.stopCarAnimation(r,t),"reset"===a&&(this.view.garage.isResetPressed=!0,this.view.garage.cars.map((e=>String(e.id))).forEach((e=>n(this,void 0,void 0,(function*(){this.model.stopEngine(e)})))),this.view.garage.stopCarAnimation(r,t)),"race"===a){this.view.garage.isResetPressed=!1;const e=yield this.model.startRace(this.view.garage.cars),t=yield Promise.all(e);t.sort(((e,t)=>e.engineData.distance/e.engineData.velocity-t.engineData.distance/t.engineData.velocity)),this.view.garage.startRaceAnimation(t);const a=t.map((e=>this.getRacersData(e)));for(let e=0;e<a.length;e+=1)if(200===(yield a[e]).status){if(this.view.garage.isResetPressed)return;const{id:a}=t[e],n=(t[e].engineData.distance/t[e].engineData.velocity/1e3).toFixed(2),r=this.view.garage.cars.find((e=>String(e.id)===a)),i=Object.assign(Object.assign({},r),{time:n});this.updateWinners(i),this.view.garage.modal.buildModal(`${i.name} wont first (${i.time}s)`),this.view.garage.isResetPressed=!1;break}}}))}getRacersData(e){return n(this,void 0,void 0,(function*(){const t=yield this.model.drive(e.id);return 500===t.status&&this.view.garage.pauseCarAnimation(e.id),t}))}}},576:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,i){function o(e){try{d(n.next(e))}catch(e){i(e)}}function s(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(679),o=r(a(647)),s=r(a(366)),d=r(a(138)),l=r(a(367));t.default=class{constructor(){this.api=new o.default}getGarageData(e){return n(this,void 0,void 0,(function*(){return this.api.getCars(e)}))}createCar(e){return n(this,void 0,void 0,(function*(){return this.api.createCar(e)}))}updateCar(e,t){return this.api.updateCar(e,t)}deleteCar(e){return n(this,void 0,void 0,(function*(){return this.api.deleteCar(e)}))}generateRandomCars(e){return n(this,void 0,void 0,(function*(){let t=0;const a=[];for(;t<e;){const e=this.getRandomCar();a.push(this.createCar(e)),t+=1}return Promise.all(a)}))}getRandomCar(){return{name:this.getRandomCarName(),color:(0,l.default)()}}getRandomCarName(){const e=(0,d.default)(s.default),t=(0,d.default)(e.models);return`${e.brand} ${t}`}getWinnersData(e){return n(this,void 0,void 0,(function*(){const t=yield this.api.getWinners(e);if(!t.ok)throw new Error("server is not available");const a=t.headers.get("X-Total-Count"),n=yield t.json(),r=(yield this.getGarageData()).cars;for(let e=0;e<n.length;e+=1){const t=n[e],a=r.find((e=>e.id===t.id));t.name=String(null==a?void 0:a.name),t.color=String(null==a?void 0:a.color)}return{winners:n,count:a?Number(a):n.length,page:(null==e?void 0:e.page)?e.page:1,sort:(null==e?void 0:e.sort)?e.sort:i.SortingType.id,order:(null==e?void 0:e.order)?e.order:i.SortingOrder.asc}}))}updateWinners(e){return n(this,void 0,void 0,(function*(){const t=yield this.api.getWinner(String(e.id));if(404===t.status)yield this.api.createWinner({id:e.id,wins:1,time:Number(e.time)});else if(200===t.status){const a=yield t.json();yield this.api.updateWinner(String(e.id),{wins:a.wins+1,time:Number(e.time)<a.time?Number(e.time):a.time})}}))}deleteWinner(e){return this.api.deleteWinner(e)}startEngine(e){return this.api.startEngine({id:e,status:"started"})}stopEngine(e){return this.api.stopEngine({id:e,status:"stopped"})}drive(e){return this.api.drive({id:e,status:"drive"})}startRace(e){return n(this,void 0,void 0,(function*(){return e.map((e=>String(e.id))).map((e=>n(this,void 0,void 0,(function*(){return{id:e,engineData:yield(yield this.startEngine(e)).json()}}))))}))}}},856:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{const t=document.createElement(e.tag);return e.classes&&t.classList.add(...e.classes),e.atributesAdnValues&&e.atributesAdnValues.forEach((e=>t.setAttribute(e[0],e[1]))),e.inner&&(t.innerHTML=e.inner),t}},138:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>e[Math.floor(Math.random()*e.length)]},367:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>`#${Math.floor(16777215*Math.random()).toString(16)}`},697:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{e instanceof HTMLElement&&e.classList.toggle(`${e.classList[0]}_active`)}},918:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   version="1.1"\n   id="svg5332"\n   viewBox="0 0 256.00007 256.00002"\n  height=60\n   width=120\n   >\n  <title\n     id="title7394">Car</title>\n  <defs\n     id="defs5334" />\n  <metadata\n     id="metadata5337">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title>Car</dc:title>\n        <cc:license\n           rdf:resource="http://creativecommons.org/publicdomain/zero/1.0/" />\n        <dc:creator>\n          <cc:Agent>\n            <dc:title>Josh &quot;Cheeseness&quot; Bush</dc:title>\n          </cc:Agent>\n        </dc:creator>\n        <dc:description>Originally created for the official shirt for the 2014 Open Source Developers\' Conference held at Griffith University.</dc:description>\n        <dc:subject>\n          <rdf:Bag>\n            <rdf:li>car hatch</rdf:li>\n          </rdf:Bag>\n        </dc:subject>\n        <dc:date>2014-10-22</dc:date>\n        <dc:coverage></dc:coverage>\n      </cc:Work>\n      <cc:License\n         rdf:about="http://creativecommons.org/publicdomain/zero/1.0/">\n        <cc:permits\n           rdf:resource="http://creativecommons.org/ns#Reproduction" />\n        <cc:permits\n           rdf:resource="http://creativecommons.org/ns#Distribution" />\n        <cc:permits\n           rdf:resource="http://creativecommons.org/ns#DerivativeWorks" />\n      </cc:License>\n    </rdf:RDF>\n  </metadata>\n  <g\n     transform="translate(-362.5464,-406.21469)"\n     id="layer1">\n    <path\n       id="path4729-0-0"\n       d="m 469.54633,480.16096 c -28.4885,-0.0451 -72.9963,4.7606 -72.9963,4.7606 0,0 6.1798,1.26482 4.9637,4.32757 -1.2162,3.06274 -12.9467,17.32041 -15.7822,19.34577 -1.6924,1.20893 -5.2585,1.62257 -7.8752,1.76616 0,0 -1.7042,1.94896 -2.5337,3.4482 -4.4252,7.99941 -3.7176,17.63218 -3.6889,16.15996 l -0.029,1.5351 c -6.6598,3.69009 -8.1038,5.47112 -8.6547,6.61849 -0.8478,1.76593 -0.2904,18.57192 1.0182,20.87321 0.9857,1.73392 7.9214,6.33244 11.2916,8.50164 -0.056,-0.70873 -0.092,-1.42082 -0.092,-2.13786 0,-7.17978 2.8263,-14.00249 7.9031,-19.07936 5.0769,-5.07684 11.8996,-7.90314 19.0794,-7.90314 7.1798,0 14.0025,2.8263 19.0793,7.90314 5.0769,5.07687 7.9029,11.89957 7.9029,19.07936 0,2.24289 -0.2752,4.45153 -0.8092,6.58241 l 0.5548,0.0361 120.8635,0 c -0.7721,-2.53009 -1.1733,-5.18506 -1.1733,-7.8912 0,-7.17954 2.826,-14.00226 7.9029,-19.07912 5.0768,-5.07686 11.8995,-7.90314 19.0793,-7.90314 7.18,0 14.0025,2.82628 19.0794,7.90314 5.0768,5.07686 7.9031,11.89958 7.9031,19.07912 0,2.55557 -0.364,5.06356 -1.0541,7.46584 5.0469,-0.7148 14.2719,-2.31369 15.0106,-4.57621 1.0187,-3.12 3.4004,-16.99581 1.0619,-24.52634 -2.3384,-7.53075 -12.7275,-20.74585 -51.6738,-29.01891 -44.8008,-25.45504 -63.7988,-31.06907 -89.3116,-32.92651 -3.1889,-0.23195 -2.9498,-0.33767 -7.0195,-0.34399 z m 1.7242,3.97119 c 6.6996,-0.0428 31.1274,0.62823 56.5514,14.15351 8.7451,4.65217 32.7782,16.49877 29.6553,19.0913 -12.726,10.56532 -21.7497,-3.30913 -85.7694,-5.09107 l -1.9091,-28.12782 c 0,0 0.5147,-0.0225 1.4718,-0.0248 z m -13.6445,0.21414 0,0 c 2.3774,-0.0293 3.8363,0 3.8363,0 l -0.891,27.61884 c 0,0 -53.8404,-1.39083 -55.3013,-2.99106 -1.4609,-1.60002 8.5016,-15.87798 20.6823,-20.49136 9.1355,-3.45971 24.5414,-4.05572 31.6737,-4.13822 z m 125.9029,37.15648 c 1.2019,-0.0225 2.4794,0.15328 2.8914,0.20063 2.5493,0.28852 11.4961,3.71849 17.0531,7.57695 5.5568,3.85848 9.3686,8.58706 9.3686,8.58706 -7.1911,2.09999 -31.9798,-14.08521 -31.7553,-15.46409 0.1127,-0.68934 1.24,-0.88657 2.4422,-0.90077 z m -24.6517,6.56462 9.4184,0 c 0,0 -0.6785,1.44064 -2.464,1.79973 -1.7855,0.35931 -2.8342,0.45646 -4.4903,0 -1.6564,-0.45625 -2.4641,-1.79973 -2.4641,-1.79973 z m 16.673,13.10937 c -6.0619,0 -11.9133,2.42348 -16.1998,6.71002 -4.2866,4.28631 -6.7096,10.13747 -6.7096,16.19963 0,6.06216 2.423,11.91332 6.7096,16.19986 4.2865,4.28632 10.1379,6.70978 16.1998,6.70978 6.0622,0 11.9134,-2.42346 16.1999,-6.70978 4.2865,-4.28654 6.7098,-10.1377 6.7098,-16.19986 0,-6.06216 -2.4233,-11.91332 -6.7098,-16.19963 -4.2865,-4.28654 -10.1377,-6.71002 -16.1999,-6.71002 z m -173.4002,1.27272 c -6.0621,0 -11.9133,2.42324 -16.1998,6.70999 -4.2866,4.28656 -6.7098,10.13748 -6.7098,16.19965 0,6.06215 2.4232,11.91332 6.7098,16.19986 4.2865,4.28654 10.1377,6.70978 16.1998,6.70978 6.0622,0 11.9133,-2.42324 16.1999,-6.70978 4.2865,-4.28654 6.7098,-10.13771 6.7098,-16.19986 0,-6.06217 -2.4233,-11.91309 -6.7098,-16.19965 -4.2866,-4.28675 -10.1377,-6.70999 -16.1999,-6.70999 z m 173.4002,8.9094 c 3.2679,0 6.6882,1.41811 8.9989,3.72864 2.3106,2.31074 3.7287,5.73124 3.7287,8.99889 0,3.26766 -1.4181,6.69017 -3.7287,9.0007 -2.3107,2.31076 -5.731,3.72683 -8.9989,3.72683 -3.2676,0 -6.6881,-1.41607 -8.9986,-3.72683 -2.3108,-2.31053 -3.7289,-5.73305 -3.7289,-9.0007 0,-3.26765 1.4181,-6.68815 3.7289,-8.99889 2.3105,-2.31053 5.731,-3.72864 8.9986,-3.72864 z m -173.4002,1.27271 c 3.2677,0 6.6882,1.4181 8.9987,3.72886 2.3107,2.31053 3.7288,5.73102 3.7288,8.99867 0,3.26788 -1.4181,6.69017 -3.7288,9.00091 -2.3105,2.31054 -5.731,3.72662 -8.9987,3.72662 -3.2676,0 -6.6881,-1.41608 -8.9989,-3.72662 -2.3105,-2.31074 -3.7286,-5.73303 -3.7286,-9.00091 0,-3.26765 1.4181,-6.68814 3.7286,-8.99868 2.3108,-2.31075 5.7313,-3.72885 8.9989,-3.72885 z"\n       style="fill:color" />\n  </g>\n</svg>\n'},377:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageView=t.MAX_CARS_COUNT_PER_PAGE=void 0;const r=n(a(856)),i=n(a(697)),o=n(a(918)),s=n(a(558));t.MAX_CARS_COUNT_PER_PAGE=7,t.GarageView=class{constructor(e,t){this.container=null,this.carsSection=null,this.inputs={},this.cars=[],this.pressedSelectButton=null,this.page=1,this.lastPage=1,this.count=0,this.carImages=[],this.isResetPressed=!1,this.buttonsA=[],this.buttonsB=[],this.callback=e,this.updateWinnersCallback=t,this.modal=new s.default}updateGarage(e){var t;const a=this.createCarsSection(e);null===(t=this.carsSection)||void 0===t||t.replaceWith(a),this.carsSection=a}drawGarage(e,t){const a=this.createControlSection();this.carsSection=this.createCarsSection(e),t.append(a,this.carsSection),this.container=t}createControlSection(){const e=(0,r.default)({tag:"section",classes:["section","section__control"]}),t=this.createInputBlock("create"),a=this.createInputBlock("update"),n=this.createButtonsBlock(["race","reset","generate cars"]);return e.append(t,a,n),e}createInputBlock(e){const t=(0,r.default)({tag:"form",classes:["form"]}),a=(0,r.default)({tag:"input",classes:["form__input-text"],atributesAdnValues:[["type","text"]]}),n=(0,r.default)({tag:"input",classes:["form__input-color"],atributesAdnValues:[["type","color"]]});n.value="#FFFFFF";const i=(0,r.default)({tag:"button",classes:["button","form__button"],atributesAdnValues:[["type","button"],["data-button",e]],inner:e.toUpperCase()});return this.inputs=Object.assign(Object.assign({},this.inputs),{[e]:{textInput:a,colorInput:n}}),this.buttonsHandler(i),t.append(a,n,i),t}createButtonsBlock(e,t){const a=(0,r.default)({tag:"div",classes:["control__buttons"]}),n=e.map((e=>{const t=(0,r.default)({tag:"button",classes:["button"],atributesAdnValues:[["data-button",`${e.split(" ")[0]}`]],inner:e.toUpperCase()});return"a"===t.dataset.button&&this.buttonsA.push(t),"b"===t.dataset.button&&this.buttonsB.push(t),t}));return"number"==typeof t&&n.forEach((e=>e.setAttribute("data-car",String(t)))),n.forEach((e=>this.buttonsHandler(e))),a.append(...n),a}createCarsSection(e){const{cars:a,count:n,page:i}=e;this.cars=a.slice(0,t.MAX_CARS_COUNT_PER_PAGE),this.count=n,this.page=i,this.carImages=[],this.lastPage=Math.ceil(n/t.MAX_CARS_COUNT_PER_PAGE);const o=Math.ceil(n/t.MAX_CARS_COUNT_PER_PAGE)<=i,s=(0,r.default)({tag:"section",classes:["section","section__cars"]}),d=(0,r.default)({tag:"h1",inner:`Garage(${n})`}),l=(0,r.default)({tag:"h2",inner:`Page#${this.page}`}),c=this.cars.map((e=>this.createCar(e))),u=this.createButtonsBlock(["prev","next"]);return 1===i&&(u.firstElementChild.disabled=!0),o&&(u.lastElementChild.disabled=!0),s.append(d,l,...c,u),s}createCar(e){const{name:t,color:a,id:n}=e,i=(0,r.default)({tag:"div",classes:["car"],atributesAdnValues:[["data-car",`${n}`]]}),s=this.createButtonsBlock(["select","remove"],n),d=(0,r.default)({tag:"span",classes:["car__title"],inner:t}),l=this.createButtonsBlock(["a","b"],n);l.lastElementChild.disabled=!0;const c=(0,r.default)({tag:"div",classes:["car__image"],inner:o.default.replace("color",a),atributesAdnValues:[["data-car",`${n}`]]});return c.addEventListener("startCar",this.callback),this.carImages.push(c),i.append(s,d,l,c),i}buttonsHandler(e){e.addEventListener("click",(t=>{"select"===e.dataset.button?this.toggleSelectedCar(e):(this.callback(t),"a"===e.dataset.button||"b"===e.dataset.button?this.toggleDriveButtons(e):"race"===e.dataset.button&&this.buttonsA.forEach((e=>this.toggleDriveButtons(e))))}))}toggleDriveButtons(e){const t=e;"a"===e.dataset.button?(t.disabled=!0,t.nextElementSibling.disabled=!1):(t.disabled=!0,t.previousElementSibling.disabled=!1)}toggleSelectedCar(e){const t=this.cars.find((t=>e.dataset.car===String(t.id))),a={name:"",color:"#000000"};e.classList.contains("button_active")?((0,i.default)(e),this.selectedCar=void 0,this.pressedSelectButton=null):(a.color=String(null==t?void 0:t.color),a.name=String(null==t?void 0:t.name),this.selectedCar=t,(0,i.default)(this.pressedSelectButton),this.pressedSelectButton=e,(0,i.default)(e)),this.setInputsValue(a)}setInputsValue(e){this.inputs.update.textInput.value=e.name,this.inputs.update.colorInput.value=e.color}startCarAnimation(e,t){const a=this.carImages.find((t=>t.dataset.car===e)),n=t.distance/t.velocity,r=a.animate([{left:"0px"},{left:"calc(100% - 100px)"}],{id:e,duration:n});r.play(),r.addEventListener("finish",(()=>{a.style.left="calc(100% - 100px)",r.cancel()}))}pauseCarAnimation(e){const t=document.getAnimations().find((t=>t.id===e));t&&t.pause()}stopCarAnimation(e,t){if("reset"===t.dataset.button)return document.getAnimations().forEach((e=>{e.cancel()})),this.carImages.forEach((e=>{e.style.left="0px"})),void this.buttonsB.forEach((e=>this.toggleDriveButtons(e)));const a=this.carImages.find((t=>t.dataset.car===e)),n=a.getAnimations()[0];n?n.cancel():a.style.left="0px",this.toggleDriveButtons(t)}startRaceAnimation(e){this.racers=e,e.forEach((e=>this.startCarAnimation(e.id,e.engineData)))}}},458:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(a(856)),i=n(a(234));t.default=class{constructor(e){this.switchField=new i.default(e,"header-radio",["garage","winners"],["to garage","to winners"])}drawHeader(){const e=(0,r.default)({tag:"header",classes:["header"]}),t=(0,r.default)({tag:"div",classes:["header-wrapper","wrapper"]});t.append(this.switchField.createSwitcField()),e.append(t),document.body.prepend(e)}}},558:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(a(856));t.default=class{constructor(){this.overlay=null,this.modal=null,this.modalContent=null,this.closeModal=()=>{this.overlay&&(this.overlay.remove(),document.body.style.overflow="visible")}}buildModal(e){this.overlay=(0,r.default)({tag:"div",classes:["modal-wrapper"]}),this.modal=(0,r.default)({tag:"div",classes:["modal"]}),this.modalContent=(0,r.default)({tag:"p",classes:["modal-content"],inner:e}),this.modal.append(this.modalContent),this.overlay.append(this.modal),this.bindEvents(),this.openModal()}openModal(){this.overlay&&(document.body.append(this.overlay),document.body.style.overflow="hidden")}bindEvents(){this.overlay&&this.overlay.addEventListener("click",this.closeModal)}}},234:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(a(856));t.default=class{constructor(e,t,a,n){this.callback=e,this.name=t,this.values=a,this.textes=n}createSwitcField(){const e=(0,r.default)({tag:"div",classes:["switch-field"]}),t=["switch_left","switch_right"].map(((e,t)=>(0,r.default)({tag:"input",atributesAdnValues:[["type","radio"],["id",e],["name",this.name],["value",this.values[t]]]})));t[0].checked=!0;const a=t.map(((e,t)=>(0,r.default)({tag:"label",atributesAdnValues:[["for",e.id]],inner:this.textes[t]})));return t.forEach((e=>this.inputHandler(e))),t.forEach(((t,n)=>e.append(t,a[n]))),e}inputHandler(e){e.addEventListener("change",(e=>{const t=e.target;this.callback(t.value)}))}}},113:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(a(458)),i=a(377),o=a(679),s=n(a(856)),d=n(a(183));t.default=class{constructor(e,t){this.header=new r.default(this.togglePage.bind(this)),this.garage=new i.GarageView(e,t),this.winners=new d.default(e)}drawApp(e,t){this.header.drawHeader();const a=(0,s.default)({tag:"main",classes:["main"]}),n=(0,s.default)({tag:"div",classes:["main-wrapper","wrapper"]});this.garageContainer=(0,s.default)({tag:"div",classes:["garage-container"]}),this.winnersContainer=(0,s.default)({tag:"div",classes:["winners-container"]}),this.winnersContainer.style.display="none",this.garage.drawGarage(e,this.garageContainer),this.winners.drawWinners(t,this.winnersContainer),n.append(this.winnersContainer,this.garageContainer),a.append(n),document.body.append(a)}togglePage(e){e===o.Page.garage?(this.winnersContainer.style.display="none",this.garageContainer.style.display="block"):(this.garageContainer.style.display="none",this.winnersContainer.style.display="block")}}},183:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_WINNERS_COUNT_PER_PAGE=void 0;const r=a(679),i=n(a(856)),o=n(a(918));t.MAX_WINNERS_COUNT_PER_PAGE=10,t.default=class{constructor(e){this.page=1,this.lastPage=1,this.container=null,this.count=0,this.sort=r.SortingType.id,this.order=r.SortingOrder.asc,this.winners=[],this.callback=e}drawWinners(e,a){this.container=a;const{count:n,page:r,sort:s,order:d,winners:l}=e;this.winners=l.slice(0,t.MAX_WINNERS_COUNT_PER_PAGE),this.page=r,this.count=n,this.sort=s,this.order=d,this.lastPage=Math.ceil(n/t.MAX_WINNERS_COUNT_PER_PAGE);const c=Math.ceil(n/t.MAX_WINNERS_COUNT_PER_PAGE)<=r,u=(0,i.default)({tag:"h2",inner:`Winners(${this.count})`}),h=(0,i.default)({tag:"h2",inner:`Page#${this.page}`}),g=(0,i.default)({tag:"table",classes:["table"]}),p=(0,i.default)({tag:"thead",classes:["thead"]}),C=this.createTableRow("th",["number","car","name","wins","best time (seconds)"]);p.append(C);const m=(0,i.default)({tag:"tbody",classes:["tbody"]}),b=this.winners.map(((e,a)=>this.createTableRow("td",[String(t.MAX_WINNERS_COUNT_PER_PAGE*this.page-t.MAX_WINNERS_COUNT_PER_PAGE+a+1),o.default.replace("color",e.color),e.name,String(e.wins),String(e.time)])));m.append(...b),g.append(p,m);const v=this.createButtonsBlock(["prev","next"]);1===r&&(v.firstElementChild.disabled=!0),c&&(v.lastElementChild.disabled=!0),a.append(u,h,g,v)}updateWinners(e){this.container&&(this.container.innerHTML="",this.drawWinners(e,this.container))}createButtonsBlock(e){const t=(0,i.default)({tag:"div",classes:["control__buttons"]}),a=e.map((e=>(0,i.default)({tag:"button",classes:["button"],atributesAdnValues:[["data-button",`${e.split(" ")[0]}`]],inner:e.toUpperCase()})));return a.forEach((e=>this.buttonsHandler(e))),t.append(...a),t}createTableRow(e,t){const a=(0,i.default)({tag:"tr"}),n=t.map((t=>{const a=(0,i.default)({tag:e,atributesAdnValues:[["data-sort",`${"best time (seconds)"===t?"time":t}`]],inner:t});return"best time (seconds)"!==t&&"wins"!==t||(a.dataset.sort="best time (seconds)"===t?"time":t,this.sort===a.dataset.sort&&this.order===r.SortingOrder.asc&&(a.innerText+="↑"),this.sort===a.dataset.sort&&this.order===r.SortingOrder.desc&&(a.innerText+="↓"),this.tableCellHandler(a)),a}));return a.append(...n),a}buttonsHandler(e){e.addEventListener("click",this.callback)}tableCellHandler(e){e.addEventListener("click",(e=>{const t=e.target;t.dataset.sort!==r.SortingType.wins&&t.dataset.sort!==r.SortingType.time||(this.sort===r.SortingType.id?this.order=r.SortingOrder.asc:this.order=this.order===r.SortingOrder.asc?r.SortingOrder.desc:r.SortingOrder.asc,this.sort=t.dataset.sort,this.callback(e))}))}}},607:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(a(151));a(213),(new r.default).start()},679:(e,t)=>{var a,n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Page=t.SortingOrder=t.SortingType=void 0,(r=t.SortingType||(t.SortingType={})).id="id",r.wins="wins",r.time="time",(n=t.SortingOrder||(t.SortingOrder={})).asc="ASC",n.desc="DESC",(a=t.Page||(t.Page={})).garage="garage",a.winners="winners"}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a(607)})();